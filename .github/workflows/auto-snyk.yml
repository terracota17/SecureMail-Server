name: GitHub Auto Snyk Evaluation
on: [push, pull_request]

permissions:
  contents: write
  security-events: write

jobs:
  Auto-snyk-test:
    runs-on: self-hosted
    steps:
      - name: Snyk auth
        run: snyk-linux auth ${{ secrets.SNYK_AUTH_TOKEN }}

      - name: Checkout del c√≥digo
        uses: actions/checkout@v4

      - name: Ejecutar Snyk SAST
        run: snyk-linux code test --sarif

      - name: Ejecutar Snyk SCA
        run: snyk-linux monitor  --sarif
